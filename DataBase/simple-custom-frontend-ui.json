{
    "title": "Custom text chat UI",
    "description": "Example of how to create a simple frontend UI powered with TextChatService.",
    "content": "This example shows how to use the Class.TextChatService class to design your own frontend. It reuses the default text channels from Class.TextChatService.CreateDefaultTextChannels|CreateDefaultTextChannels and is very simple compared to the default UI.\n\n1. Disable the default UI that comes with the Class.TextChatService by setting the Class.ChatWindowConfiguration.Enabled and Class.ChatInputBarConfiguration.Enabled properties to false in Studio's Properties window.\n2. Create a replacement for the chat input bar. This is the text box that emits messages when the user presses Enter.\n\n   1. Create a Class.ScreenGui and parent it to Class.StarterGui.\n   2. Create a Class.TextBox and parent it to the new Class.ScreenGui, then reposition and resize it as desired.\n   3. Create a Class.LocalScript and parent it to the new Class.TextBox.\n   4. Add the following code to the Class.LocalScript:\n\n\t\t\tlua title=\"Client\"\n\t\t\tlocal TextChatService = game:GetService(\"TextChatService\")\n\n\t\t\t-- RBXGeneral is the default public channel\n\t\t\tlocal RBXGeneral = TextChatService:FindFirstChild(\"TextChannels\"):WaitForChild(\"RBXGeneral\")\n\n\t\t\tlocal textBox = script.Parent\n\t\t\ttextBox.FocusLost:Connect(function(enterPressed)\n\t\t\t\tlocal text = textBox.Text\n\t\t\t\tif enterPressed and #text > 0 then\n\t\t\t\t\tlocal success, response = pcall(function()\n\t\t\t\t\t\treturn RBXGeneral:SendAsync(textBox.Text)\n\t\t\t\t\tend)\n\n\t\t\t\t\tif not success then\n\t\t\t\t\t\tRBXGeneral:DisplaySystemMessage(\"Failed to send message\")\n\t\t\t\t\tend\n\n\t\t\t\t\t-- Users expect the input box to be cleared after sending a message\n\t\t\t\t\ttextBox.Text = \"\"\n\t\t\t\tend\n\t\t\tend)\n\n\n3. Create a replacement for the chat window. This is the Class.ScrollingFrame that displays messages as they are received from Class.TextChatService.MessageReceived. This step also creates a Class.UIListLayout to automatically layout the messages.\n\n   1. Create another new Class.ScreenGui and parent it to Class.StarterGui.\n   2. Create a Class.ScrollingFrame and parent it to the ScreenGui, then reposition and resize it as desired.\n   3. Create a Class.UIListLayout and parent it to the Class.ScrollingFrame.\n   4. Create a Class.LocalScript and parent it to the Class.ScrollingFrame.\n   5. Add the following code to the Class.LocalScript:\n\n\t\tlua title=\"Client\"\n\t\tlocal TextChatService = game:GetService(\"TextChatService\")\n\n\t\t-- Function to create a new text label for each message received\n\t\tlocal function addMessageGui(textChatMessage: TextChatMessage)\n\t\t\tlocal isOutgoingMessage = textChatMessage.Status == Enum.TextChatMessageStatus.Sending\n\n\t\t\tlocal parent = script.Parent\n\n\t\t\tlocal originalLabel = parent:FindFirstChild(textChatMessage.MessageId)\n\t\t\tif originalLabel then\n\t\t\t\toriginalLabel.Text = textChatMessage.Text\n\t\t\t\toriginalLabel.BackgroundTransparency = if isOutgoingMessage then 0.5 else 0\n\t\t\telse\n\t\t\t\tlocal textLabel = Instance.new(\"TextLabel\")\n\t\t\t\ttextLabel.BorderSizePixel = 0\n\t\t\t\ttextLabel.Font = Enum.Font.BuilderSans\n\t\t\t\ttextLabel.TextSize = 18\n\t\t\t\ttextLabel.TextXAlignment = Enum.TextXAlignment.Left\n\t\t\t\ttextLabel.BackgroundTransparency = if isOutgoingMessage then 0.5 else 0\n\t\t\t\ttextLabel.BackgroundColor3 = Color3.fromRGB(0, 0, 0)\n\t\t\t\ttextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)\n\t\t\t\ttextLabel.Name = textChatMessage.MessageId\n\t\t\t\ttextLabel.AutomaticSize = Enum.AutomaticSize.XY\n\t\t\t\ttextLabel.Text = textChatMessage.Text\n\t\t\t\ttextLabel.Parent = parent\n\t\t\tend\n\t\tend\n\n\t\t-- Start listening for incoming messages\n\t\tTextChatService.MessageReceived:Connect(addMessageGui)\n\n\n\n\t\tWhen using the Class.TextChatService.MessageReceived event, it's important to check if the message already exists in the chat window. This event is called once when sending and once when the message is received from the server.\n\n4. Test your experience by sending messages in the chat input bar. You should see the messages appear in the chat window. You can then expand on this example by adding features such as focusing the Class.TextBox when a key is pressed or adding chat tags.",
    "source": "simple-custom-frontend-ui.md"
}