{
    "title": "UI drag detectors",
    "description": "UI drag detectors facilitate and encourage interaction with 2D user interface elements in an experience, such as sliders and spinners.",
    "content": "The Class.UIDragDetector instance facilitates and encourages interaction with 2D user interface elements in an experience, such as sliders, spinners, and more. Key features include:\n\n- Place a Class.UIDragDetector under any Class.GuiObject instance to make it draggable via all user inputs without a single line of code.\n\n- Choose from several Class.UIDragDetector.DragStyle|DragStyle options, define how the object responds to motion via Class.UIDragDetector.ResponseStyle|ResponseStyle, and optionally apply axis, movement limits, or drag boundaries.\n\n- Scripts can respond to manipulation of dragged objects to drive logic responses, such as adjusting settings.\n\n- Class.UIDragDetector|UIDragDetectors work in Studio's edit and play mode as long as you're not using the Select, Move, Scale, or Rotate tools, nor certain plugins or Studio's UI editor tools.\n\nFor drag detectors that manipulate 3D objects in an experience, such as opening doors and drawers or sliding a part around, see 3D Drag Detectors.\n\nMake UI elements draggable\n\nTo make any Class.GuiObject instances draggable, simply add a Class.UIDragDetector as a direct descendant.\n\n1. In the Explorer window, hover over the Class.GuiObject instance and click the &CirclePlus; button. A contextual menu displays.\n1. From the menu, insert a UIDragDetector.\n\n\n\n1. By default, the object will now be draggable in the Class.LayerCollector|LayerCollector interface.\n\nRemember that Class.UIDragDetector|UIDragDetectors only work in Studio if you're not using the Select, Move, Scale, or Rotate tools, nor certain plugins or Studio's UI editor tools.\n\nCustomize UI drag detectors\n\nDrag style\n\nClass.UIDragDetector|UIDragDetectors map cursor motion to calculate proposed 2D motion and/or rotation. Through the Class.UIDragDetector.DragStyle|DragStyle property, you can choose from different mappings to suit your needs. For example, Enum.UIDragDetectorDragStyle.TranslatePlane produces translation in the 2D plane of the Class.LayerCollector, while Enum.UIDragDetectorDragStyle.Rotate normally produces a rotation instead of translation.\n\n\n\t\tSetting\n\t\tDescription\n\n\n\n\t\tEnum.UIDragDetectorDragStyle.TranslateLine|TranslateLine\n\t\t1D motion along the detector's Class.UIDragDetector.DragAxis|DragAxis.\n\n\n\t\tEnum.UIDragDetectorDragStyle.TranslatePlane|TranslatePlane\n\t\t2D motion in the plane of the Class.LayerCollector.\n\n\n\t\tEnum.UIDragDetectorDragStyle.Rotate|Rotate\n\t\tBy default, rotation about the absolute center position of the detector's parent Class.GuiObject. If Class.UIDragDetector.ReferenceUIInstance|ReferenceUIInstance is set, rotation happens about that instance's absolute center position.\n\n\n\t\tEnum.UIDragDetectorDragStyle.Scriptable|Scriptable\n\t\tCalculates desired motion via a custom function provided through Class.UIDragDetector:SetDragStyleFunction()|SetDragStyleFunction().\n\n\nDrag direction\n\nBy default, 2D motion and the associated Class.UIDragDetector.DragStyle|DragStyle map to the space of the ancestor Class.LayerCollector. However, you may want to change the Class.UIDragDetector.ReferenceUIInstance|ReferenceUIInstance or the Class.UIDragDetector.DragAxis|DragAxis when building different UI components.\n\n\n\t\tSetting\n\t\tDescription\n\t\tDefault\n\n\n\n\t\tClass.UIDragDetector.ReferenceUIInstance|ReferenceUIInstance\n\t\tA Class.GuiObject instance whose local space and absolute center position is the reference space and origin for the detector. Setting this reference affects properties such as Class.UIDragDetector.DragUDim2|DragUDim2, Class.UIDragDetector.DragRotation|DragRotation, and the behavior of Class.UIDragDetector.DragAxis|DragAxis.\n\t\tnil\n\n\n\t\tClass.UIDragDetector.DragAxis|DragAxis\n\t\tDatatype.Vector2 value that defines the axis of movement for the dragged object when Class.UIDragDetector.DragStyle|DragStyle is set to Enum.UIDragDetectorDragStyle.TranslateLine. The axis is defined in the local space of the Class.UIDragDetector unless Class.UIDragDetector.ReferenceUIInstance|ReferenceUIInstance is defined, in which case the axis is defined in that instance's local space.\n\t\t(1, 0)\n\n\nResponse to motion\n\nThe Class.UIDragDetector.ResponseStyle property specifies how an object's position value is changed by the proposed motion. The custom response styles let you use the resulting Class.UIDragDetector.DragUDim2 and Class.UIDragDetector.DragRotation values as desired, without having the detector's parent execute the proposed motion.\n\n\n\t\tSetting\n\t\tDescription\n\n\n\n\t\tEnum.UIDragDetectorResponseStyle.Offset|Offset\n\t\tMove by the Datatype.UDim.Offset|Offset values of the detector's parent's Class.GuiObject.Position value. This is the setting by default.\n\n\n\t\tEnum.UIDragDetectorResponseStyle.Scale|Scale\n\t\tMove by the Datatype.UDim.Scale|Scale values of the detector's parent's Class.GuiObject.Position value.\n\n\n\t\tEnum.UIDragDetectorResponseStyle.CustomOffset|CustomOffset\n\t\tThe UI element will not move at all, but the Datatype.UDim.Offset|Offset values of the detector's Class.UIDragDetector.DragUDim2|DragUDim2 will still be updated and the detector's events will still fire, allowing you to respond to drag manipulation however you'd like.\n\n\n\t\tEnum.UIDragDetectorResponseStyle.CustomScale|CustomScale\n\t\tThe UI element will not move at all, but the Datatype.UDim.Scale|Scale values of the detector's Class.UIDragDetector.DragUDim2|DragUDim2 will still be updated and the detector's events will still fire, allowing you to respond to drag manipulation however you'd like.\n\n\nTranslation & rotation limits\n\nBy default, there are no limits to 2D motion behind the inherent restrictions of the Class.UIDragDetector.DragStyle|DragStyle. Limits for both minimum and maximum translations and rotations can be declared with the following properties if desired. Additionally, you can define how the dragged object is constrained within the bounds of a specified Class.GuiObject such as a Class.Frame.\n\n\n\t\tProperties\n\t\tDescription\n\t\tDefault\n\n\n\n\t\tClass.UIDragDetector.MinDragTranslation|MinDragTranslation\n\t\tClass.UIDragDetector.MaxDragTranslation|MaxDragTranslation\n\t\tLimits to drag translation in each dimension, defined by a Datatype.UDim2 value. If Class.UIDragDetector.MaxDragTranslation|MaxDragTranslation is greater than Class.UIDragDetector.MinDragTranslation|MinDragTranslation, translation will be clamped within that range.\n\t\t\\{0, 0\\}, \\{0, 0\\}\n\n\n\t\tClass.UIDragDetector.MinDragAngle|MinDragAngle\n\t\tClass.UIDragDetector.MaxDragAngle|MaxDragAngle\n\t\tOnly relevant if Class.UIDragDetector.DragStyle|DragStyle is set to Enum.UIDragDetectorDragStyle.Rotate, or if the functions set through Class.UIDragDetector:SetDragStyleFunction()|SetDragStyleFunction() or Class.UIDragDetector:AddConstraintFunction()|AddConstraintFunction() defines a rotation value. If Class.UIDragDetector.MaxDragAngle|MaxDragAngle is greater than Class.UIDragDetector.MinDragAngle|MinDragAngle, rotation will be clamped within that range.\n\t\t0\n\n\n\t\tClass.UIDragDetector.BoundingBehavior|BoundingBehavior\n\t\tDetermines the Class.UIDragDetector instance's bounding behavior when its Class.UIDragDetector.BoundingUI|BoundingUI is set. Setting this to Enum.UIDragDetectorBoundingBehavior.EntireObject|EntireObject bounds the entire dragged UI within the Class.UIDragDetector.BoundingUI|BoundingUI, while setting it to Enum.UIDragDetectorBoundingBehavior.HitPoint|HitPoint bounds the dragged UI only by the exact hit/grab point and its respective position after translation/rotation. As a convenience, the default of Enum.UIDragDetectorBoundingBehavior.Automatic|Automatic mimics the Enum.UIDragDetectorBoundingBehavior.EntireObject|EntireObject behavior for a UI object that's entirely contained by the Class.UIDragDetector.BoundingUI|BoundingUI, or else Enum.UIDragDetectorBoundingBehavior.HitPoint|HitPoint for a UI object that's partially outside the Class.UIDragDetector.BoundingUI|BoundingUI.\n\t\tEnum.UIDragDetectorBoundingBehavior.Automatic|Automatic\n\n\nSpeed adjustments\n\nThrough Class.UIDragDetector.SelectionModeDragSpeed|SelectionModeDragSpeed and Class.UIDragDetector.SelectionModeRotateSpeed|SelectionModeRotateSpeed, you can fine‑tune the maximum drag/rotate speeds for a detector. Furthermore, through Class.UIDragDetector.UIDragSpeedAxisMapping|UIDragSpeedAxisMapping, you can fine‑tune the X/Y dimension dragging speeds, based on the detector's Class.UIDragDetector.SelectionModeDragSpeed|SelectionModeDragSpeed.\n\n\n\t\tProperty\n\t\tDescription\n\n\n\n\t\tClass.UIDragDetector.SelectionModeDragSpeed|SelectionModeDragSpeed\n\t\tDefines the maximum drag speed for translation as a combination of Datatype.UDim.Scale|Scale and Datatype.UDim.Offset|Offset of the first ancestor Class.ScreenGui or Class.SurfaceGui the Class.UIDragDetector belongs to.\n\n\n\t\tClass.UIDragDetector.SelectionModeRotateSpeed|SelectionModeRotateSpeed\n\t\tDefines the maximum angle per second at which the Class.UIDragDetector can rotate.\n\n\n\t\tClass.UIDragDetector.UIDragSpeedAxisMapping|UIDragSpeedAxisMapping\n\t\tDetermines the X/Y dimension dragging speeds, based on the detector's Class.UIDragDetector.SelectionModeDragSpeed|SelectionModeDragSpeed. The default is Enum.UIDragSpeedAxisMapping.XY|XY, meaning the X and Y axis speeds are based off the X and Y Datatype.UDim.Scale|Scale/Datatype.UDim.Offset|Offset values respectively.Alternatives are Enum.UIDragSpeedAxisMapping|XX and Enum.UIDragSpeedAxisMapping|YY, meaning both the X and Y axis speeds are based off the X (Enum.UIDragSpeedAxisMapping|XX) or Y (Enum.UIDragSpeedAxisMapping|YY) axis for Datatype.UDim.Scale|Scale, while the Datatype.UDim.Offset|Offset values still apply to their respective axis. For example, if the first ancestor Class.ScreenGui is sized 800&times;600 and Class.UIDragDetector.SelectionModeDragSpeed|SelectionModeDragSpeed is {0.1, 10}, {0.1, 20}, a setting of Enum.UIDragSpeedAxisMapping|XX results in an X/Y drag speed of 80+10/80+20, while Enum.UIDragSpeedAxisMapping|YY results in 60+10/60+20 (note the Datatype.UDim.Offset|Offset values remain the same in both cases).\n\n\nScript responses to clicking and dragging\n\nThrough event signals, property changes, Enum.UIDragDetectorDragStyle.Scriptable|Scriptable drag style, and custom functions, scripts can respond to the manipulation of dragged UI elements to drive various settings or make logical decisions, such as sliders that adjust music and sound effect volume separately.\n\nFor user-initiated script responses like Event Signals and Scripted Drag Style, you'll most commonly need to put your script code inside a Class.LocalScript, or a Class.Script with Class.BaseScript.RunContext|RunContext set to Enum.RunContext.Client|Client.\n\nEvent signals\n\nThrough the following event signals, you can detect when a user starts, continues, and ends dragging an object.\n\n\n\t\tEvent\n\t\tDescription\n\n\n\n\t\tClass.UIDragDetector.DragStart|DragStart\n\t\tFires when a user starts dragging the object.\n\n\n\t\tClass.UIDragDetector.DragContinue|DragContinue\n\t\tFires when a user continues dragging the object after Class.UIDragDetector.DragStart|DragStart has been initiated.\n\n\n\t\tClass.UIDragDetector.DragEnd|DragEnd\n\t\tFires when a user stops dragging the object.\n\n\nThe following slider designates its container as the Class.UIDragDetector.BoundingUI|BoundingUI to limit its movement within the container area, allowing the scale‑based Enum.UIDragDetectorDragStyle|TranslateLine drag to be limited to the full width of the container without extra scripting.\n\nTo test this example, download the TransparencySlider.rbxm file, right‑click Class.StarterGui in the Explorer window, select Insert ⟩ Import Roblox Model, and choose the downloaded file.\n\nlua title=\"UIDragDetector - Event Signal Transparency Change\"\n-- Hierarchy is SliderContainer ⟩ Handle ⟩ UIDragDetector ⟩ (this script)\nlocal sliderContainer = script.Parent.Parent.Parent\nlocal handle = sliderContainer:FindFirstChild(\"Handle\")\nlocal uiDragDetector = handle:FindFirstChildWhichIsA(\"UIDragDetector\")\n\nuiDragDetector.ResponseStyle = Enum.UIDragDetectorResponseStyle.Scale  -- Set dragging by scale\nuiDragDetector.DragStyle = Enum.UIDragDetectorDragStyle.TranslateLine  -- Restricts dragging to line\nuiDragDetector.BoundingUI = sliderContainer\n\n-- Initially set container transparency to X scale value of handle\nsliderContainer.BackgroundTransparency = 1 - handle.Position.X.Scale\n\n-- Expand handle border to indicate grab start\nuiDragDetector.DragStart:Connect(function(inputPosition)\n\thandle:FindFirstChildWhichIsA(\"UIStroke\").Thickness = 6\nend)\n\n-- Change transparency by how much it dragged in scale\nuiDragDetector.DragContinue:Connect(function(inputPosition)\n\tsliderContainer.BackgroundTransparency = 1 - handle.Position.X.Scale\nend)\n\n-- Revert handle border to indicate grab end\nuiDragDetector.DragEnd:Connect(function(inputPosition)\n\thandle:FindFirstChildWhichIsA(\"UIStroke\").Thickness = 4\nend)\n\nPosition & rotation changes\n\nIn addition to event signals, you can monitor changes to the detector's Class.UIDragDetector.DragUDim2|DragUDim2 and/or Class.UIDragDetector.DragRotation|DragRotation properties directly.\n\nThe following detector has its Class.UIDragDetector.DragStyle|DragStyle set to Enum.UIDragDetectorDragStyle|Rotate, allowing users to drag the handle around the hue rotator ring, all while detecting changes to drag rotation through Class.Instance:GetPropertyChangedSignal().\n\nTo test this example, download the HueRotator.rbxm file, right‑click Class.StarterGui in the Explorer window, select Insert ⟩ Import Roblox Model, and choose the downloaded file.\n\nlua title=\"UIDragDetector - DragRotation Change\"\nlocal handle = script.Parent.Parent  -- UI element to drag\nlocal uiDragDetector = handle:FindFirstChildWhichIsA(\"UIDragDetector\")\n\nuiDragDetector.DragStyle = Enum.UIDragDetectorDragStyle.Rotate  -- Set drag style to rotate\n\nlocal function changeHue()\n\tlocal currAngle = (math.fmod(handle.Rotation, 360)) / 360\n\tif currAngle\nMultiple constraint functions can be registered and they will be called in the order of their priority value passed in upon registration, from least to greatest.\n\nThe following example utilizes a constraint function that clamps the planar drag into an X/Y grid based on the number of rows and columns. Note that the detector's Class.UIDragDetector.ResponseStyle|ResponseStyle is set to Enum.UIDragDetectorResponseStyle.Scale and its Class.UIDragDetector.BoundingUI|BoundingUI is set to the grid container.\n\nTo test this example, download the GridDrag.rbxm file, right‑click Class.StarterGui in the Explorer window, select Insert ⟩ Import Roblox Model, and choose the downloaded file.\n\nlua title=\"UIDragDetector - Drag in Grid, Snapping to Tiles\"\n-- Hierarchy is GridContainer ⟩ Handle ⟩ UIDragDetector ⟩ (this script)\nlocal gridContainer = script.Parent.Parent.Parent\nlocal handle = gridContainer:FindFirstChild(\"Handle\")  -- UI element to drag\nlocal uiDragDetector = handle:FindFirstChildWhichIsA(\"UIDragDetector\")\n\nuiDragDetector.ResponseStyle = Enum.UIDragDetectorResponseStyle.Scale  -- Set dragging by scale\nuiDragDetector.DragRelativity = Enum.UIDragDetectorDragRelativity.Relative\nuiDragDetector.BoundingUI = gridContainer\n\nlocal NUMCOLUMNS = 10\nlocal NUMROWS = 5\n\nlocal xScaleIncrement = 1 / NUMCOLUMNS\nlocal yScaleIncrement = 1 / NUMROWS\nlocal initialParentPosition = uiDragDetector.Parent.Position\n\nuiDragDetector.DragStart:Connect(function()\n\tinitialParentPosition = uiDragDetector.Parent.Position\nend)\n\nlocal function dragToGridOnly(proposedPosition, proposedRotation)\n\tlocal griddedXScale = math.round(proposedPosition.X.Scale / xScaleIncrement)  xScaleIncrement\n\tlocal griddedYScale = math.round(proposedPosition.Y.Scale / yScaleIncrement)  yScaleIncrement\n\n\treturn UDim2.fromScale(griddedXScale, griddedYScale), proposedRotation\nend\n\nuiDragDetector:AddConstraintFunction(1, dragToGridOnly)",
    "source": "ui-drag-detectors.md"
}