{
    "title": "Raycasting",
    "description": "Raycasting allows you to detect collisions and determine the position of objects.",
    "content": "At its most basic level, raycasting is the act of sending out an invisible ray from a Datatype.Vector3 point in a specific direction with a defined length. Once cast, you can detect if the ray hits a Class.BasePart or Class.Terrain cell.\n\n\n  Lasers are fired by floating orbs, and raycasting determines whether a laser hits a platform. Platforms touched by the lasers are temporarily destroyed.\n\nYou can cast a ray with the Class.WorldRoot:Raycast() method (Class.Workspace:Raycast()) from a Datatype.Vector3 origin in a Datatype.Vector3 direction.\n\nlua title=\"Basic Raycast\" highlight=\"4\"\nlocal Workspace = game:GetService(\"Workspace\")\n\nlocal rayOrigin = Vector3.new(0, 0, 0)\nlocal rayDirection = Vector3.new(0, -100, 0)\n\nlocal raycastResult = Workspace:Raycast(rayOrigin, rayDirection)\n\nWhen casting a ray, the direction parameter should encompass the desired length of the ray. For instance, if the magnitude of the direction is 10, the resulting ray will also be of length 10. The maximum length is 15,000 studs.\n\nWhen applicable, you can calculate an unknown directional vector (rayDirection) using a known origin and destination. This is useful when casting a ray between two points that can change, such as from one player character to another.\n\n1. The origin plus a directional vector indicate the ray's destination:\n\n   $\\text{rayOrigin} + \\text{rayDirection} = \\text{rayDestination}$\n\n2. Subtract $\\text{rayOrigin}$ from both sides of the equation:\n\n   $\\text{rayOrigin} + \\text{rayDirection} - \\text{rayOrigin} = \\text{rayDestination} - \\text{rayOrigin}$\n\n3. The ray's direction equals the destination minus the origin:\n\n   $\\text{rayDirection} = \\text{rayDestination} - \\text{rayOrigin}$\n\nlua highlight=\"4\"\nlocal Workspace = game:GetService(\"Workspace\")\n\nlocal rayOrigin = Workspace.TestOrigin.Position\nlocal rayDestination = Workspace.TestDestination.Position\n\nlocal rayDirection = rayDestination - rayOrigin\n\nlocal raycastResult = Workspace:Raycast(rayOrigin, rayDirection)\n\nFilter options\n\nClass.WorldRoot:Raycast() accepts an optional Datatype.RaycastParams object which tells the raycast to selectively include or exclude certain Class.BasePart|BaseParts, ignore the Water material for Class.Terrain, or use a collision group.\n\n\n     Key\n\t Description\n\n\n\n     FilterDescendantsInstances\n     Array of objects whose descendants are used in filtering raycasting candidates.\n\n\n     FilterType\n     Enum.RaycastFilterType enum which determines how the FilterDescendantsInstances array is used in the raycast operation.Enum.RaycastFilterType|Exclude &mdash; Every Class.BasePart is considered except those that are descendants of objects in the array.Enum.RaycastFilterType|Include &mdash; Only Class.BasePart|BaseParts that are descendants of objects in the array are considered.\n\n\n     IgnoreWater\n     Boolean which determines whether the Water material is considered when raycasting against Class.Terrain.\n\n\n     CollisionGroup\n     String name of the collision group used for the raycasting operation.\n\n\nlua title=\"Raycast Filtering\" highlight=\"4-7,9\"\nlocal Workspace = game:GetService(\"Workspace\")\n\nlocal rayOrigin = Vector3.zero\nlocal rayDirection = Vector3.new(0, -100, 0)\n\nlocal raycastParams = RaycastParams.new()\nraycastParams.FilterDescendantsInstances = {script.Parent}\nraycastParams.FilterType = Enum.RaycastFilterType.Exclude\nraycastParams.IgnoreWater = true\n\nlocal raycastResult = Workspace:Raycast(rayOrigin, rayDirection, raycastParams)\n\nHit detection\n\nIf the raycasting operation hits an eligible Class.BasePart or Class.Terrain cell, a Datatype.RaycastResult object is returned containing the results. To test for a hit, confirm that the result is not nil and utilize the following properties as needed.\n\n\n     Property\n\t Description\n\n\n\n     Class.Instance\n     The Class.BasePart or Class.Terrain cell that the ray intersected.\n\n\n     Position\n     Datatype.Vector3 position of the intersection between the ray and the Class.Instance.\n\n\n     Distance\n     Distance between the ray origin and intersection point.\n\n\n     Material\n     The Enum.Material of the Class.BasePart or Class.Terrain at the intersection point.\n\n\n     Normal\n     Datatype.Vector3 of the normal vector of the intersected face.\n\n\nWhen used in a place with instance streaming enabled, a client may not have streamed in distant Class.BasePart|BaseParts, so a raycast may not detect a hit. Additionally, low-detail \"imposter\" Class.Terrain and Class.Model|Models generated by the streaming system are purely visual and are not eligible raycast targets.\n\nYou can exempt any Class.BasePart from hit detection by setting its Class.BasePart.CanQuery property to false.\n\nlua title=\"Raycast Hit Detection\" highlight=\"7-11\"\nlocal Workspace = game:GetService(\"Workspace\")\n\nlocal rayOrigin = Vector3.zero\nlocal rayDirection = Vector3.new(0, -100, 0)\n\nlocal raycastResult = Workspace:Raycast(rayOrigin, rayDirection)\n\nif raycastResult then\n\tprint(\"Instance:\", raycastResult.Instance)\n\tprint(\"Position:\", raycastResult.Position)\n\tprint(\"Distance:\", raycastResult.Distance)\n\tprint(\"Material:\", raycastResult.Material)\n\tprint(\"Normal:\", raycastResult.Normal)\nelse\n\twarn(\"No raycast result!\")\nend",
    "source": "raycasting.md"
}