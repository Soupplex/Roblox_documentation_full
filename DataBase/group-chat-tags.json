{
    "title": "Assign chat tags",
    "description": "Example of how to assign chat tags to players based on their membership in a group.",
    "content": "This example demonstrates how to assign chat tags to players based on their membership in a group. Chat tags are a way to visually identify a player in the chat window and useful for indicating a player's role or status.\n\nBecause text chat callbacks expect a non-yielding callback, attempting to query the group membership status of a player in the Class.TextChatService.OnIncomingMessage callback is not recommended, as it may cause the chat system to hang or become unresponsive.\n\nInstead, set a player attribute when they join the server. Setting an attribute lets you reuse the player's status in other parts of your experience such as allowing access to particular areas or providing bonus experience.\n\n1. Create a Class.Script in Class.ServerScriptService and add the following code to it:\n\n\t\tlua title=\"Server\"\n\t\tlocal Players = game:GetService(\"Players\")\n\n\t\t-- Replace 123456 with the group ID you want to check for\n\t\tlocal groupID = 123456\n\n\t\tPlayers.PlayerAdded:Connect(function(player)\n\t\t\tlocal success, isInGroup = pcall(function()\n\t\t\t\treturn player:IsInGroup(groupID)\n\t\t\tend)\n\n\t\t\tif success and isInGroup then\n\t\t\t\tplayer:SetAttribute(\"IsVIP\", true)\n\t\t\telse\n\t\t\t\tplayer:SetAttribute(\"IsVIP\", false)\n\t\t\tend\n\t\tend)\n\n\n2. Create a Class.LocalScript in Class.StarterPlayer ‚ü© Class.StarterCharacterScripts and add the following code to display a \\[VIP\\] tag in the chat window:\n\n\t\tlua title=\"Client\"\n\t\tlocal Players = game:GetService(\"Players\")\n\t\tlocal TextChatService = game:GetService(\"TextChatService\")\n\n\t\tTextChatService.OnIncomingMessage = function(message: TextChatMessage)\n\t\t\tlocal textSource = message.TextSource\n\t\t\tif textSource then\n\t\t\t\tlocal player = Players:GetPlayerByUserId(textSource.UserId)\n\t\t\t\tif player then\n\t\t\t\t\tif player:GetAttribute(\"IsVIP\") == true then\n\t\t\t\t\t\tlocal overrideProperties = Instance.new(\"TextChatMessageProperties\")\n\t\t\t\t\t\toverrideProperties.PrefixText = \"[VIP] \" .. message.PrefixText\n\t\t\t\t\t\treturn overrideProperties\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\n\t\t\treturn nil\n\t\tend",
    "source": "group-chat-tags.md"
}