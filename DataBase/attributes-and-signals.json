{
    "title": "attributes-and-signals",
    "description": "",
    "content": "{\n    \"title\": \"Attributes and signals\",\n    \"description\": \"Attributes and signals define the player and server data used in matchmaking, including both Roblox-provided signals and custom signals you can create.\",\n    \"content\": \"Existing attributes\\n\\nThe default Roblox matchmaking configuration uses signals based on existing attributes like player location, age group, and latency.\\n\\nTo use data for matchmaking that Roblox doesn't automatically include in its default configuration, you need to create custom attributes and custom signals.\\n\\n\\n    Attribute\\n    Type\\n    Description\\n\\n\\n\\n    Estimated Player Latency\\n    Numerical\\n    The estimated latency of a player in a server.\\n\\n\\n    Has Friends\\n    Categorical\\n    Whether a server has a connection or another player of the same IP address as the joining player.\\n\\n\\n    Is Voice Chat Enabled\\n    Categorical\\n    Whether a player has voice chat enabled.\\n\\n\\n    Player Age\\n    Numerical\\n    The player’s age.\\n\\n\\n    Player Device Type\\n    Categorical\\n    The player’s device type. Can be a mobile device, a computer, a tablet, a console, or a VR device.\\n\\n\\n    Player Language\\n    Categorical\\n    The player’s language.\\n\\n\\n    Player Play History\\n    Numerical\\n    The log-10 number of minutes a player has played in a universe in the past 28 days.\\n\\n\\n    Server Occupancy\\n    Numerical\\n    The number of players in a server.\\n\\n\\n    Player Text Chat Group\\n    Categorical\\n    The player's text chat group where they can text chat together.\\n\\n\\nExisting signals\\n\\nThe following are Roblox-defined signals derived based on Roblox attributes:\\n\\n\\n    Signal\\n    Description\\n\\n\\n\\n    Age\\n    The difference between the average age of players in the server and the joining player’s age, with a maximum relevant difference of 25.\\n\\n\\n    Device Type\\n    The ratio of players in the server with the same device type as the joining player.\\n\\n\\n    Friends\\n    The number of people in the server who are connections with the joining player or who share an IP address with the joining player. 1 if there is a preferred player, 0 otherwise.\\n\\n\\n    Latency\\n    The estimated player latency for a server, with a max relevant value of 250.\\n\\n\\n    Language\\n    The ratio of players in the server with the same language as the joining player\\n\\n\\n    Occupancy\\n    The ratio of players in the server compared to the capacity of the server.\\n\\n\\n    Play History\\n    The difference between the average play history in the server and the joining player’s play history, with a maximum relevant difference of 4.6.\\n\\n\\n    Voice Chat\\n    The ratio of players in the server with voice chat enabled.\\n\\n\\n    Text Chat\\n    The ratio of players in the server who can text chat with the joining player together.\\n\\n\\nAge\\n\\nA numerical signal that compares the average ages of players on a server to the joining player's age. This signal has a max relevant difference of 25. The signal score is inversely related to the age difference, meaning lower age differences have higher scores.\\n\\n$\\\\text{ageDifferenceSignalScore} = 1 - \\\\min(25, \\\\text{ageDifference}) / 25$\\n\\nwhere\\n\\n$\\\\text{ageDifference} = |\\\\text{avgServerAge} - \\\\text{joiningPlayerAge}|$\\n\\nDevice Type\\n\\nA categorical signal that measures the ratio of players on the server with the same device type as the joining player. Device types include: Computer, mobile device, tablet, console, and VR device.\\n\\n$\\\\text{deviceTypeSignalScore} = \\\\text{\\\\# players with same device as joining player} / \\\\text{\\\\# players on the server}$\\n\\nFriends\\n\\nA preferred player is a player who is either connections with the joining player or who shares the same IP address as the joining player. The Friends signal is a categorical signal with a score of 1 when there is a preferred player in the server and a score of 0 when there are no preferred players on the server.\\n\\n$\\\\text{friendsSignalScore} = \\\\text{hasFriends} \\\\ {?} \\\\ 1 : 0$\\n\\nThe Friends signal can also be considered a numerical signal with a maximum relevant value of 1.\\n\\n$\\\\text{friendsSignalScore} = \\\\min(\\\\text{\\\\# preferred players in server}, 1) / 1$\\n\\nLanguage\\n\\nA categorical signal that measures the ratio of players on the server who share the same language setting as the joining player.\\n\\n$\\\\text{languageSignalScore} = \\\\text{\\\\# players with same language setting as joining player} / \\\\text{\\\\# players on the server}$\\n\\nLatency\\n\\nA numerical signal that measures the estimated ping time in milliseconds of the joining player if they were to play on a server. This signal has a max relevant value of 250 milliseconds. The signal score is inversely related to the ping, meaning lower ping values have higher scores.\\n\\n$\\\\text{latencySignalScore} = 1 - \\\\min(250, \\\\text{estimatedPingMs}) / 250$\\n\\nOccupancy\\n\\nA numerical signal that measures the ratio of players on the server to the capacity of the server.\\n\\n$\\\\text{occupancySignalScore} = \\\\text{\\\\# players in server} / \\\\text{serverCapacity}$\\n\\nPlay History\\n\\nThe Play History attribute value is the log-10 number of minutes a player has played in a universe in the past 28 days. This numerical signal compares the average log-10 Play History value of players in the server to the joining player's Play History value. This signal has a max relevant difference of 4.6. The signal score is inversely related to the play history difference, meaning lower play history differences have higher scores.\\n\\n$\\\\text{playHistorySignalScore} = 1 - \\\\min(4.6, \\\\text{playHistoryDifference} / 4.6)$, where\\n\\n$\\\\text{playHistoryDifference} = |\\\\text{avgServerPlayHistory} - \\\\text{joiningPlayerPlayHistory}|$\\n\\nVoice Chat\\n\\nA player can have voice chat enabled or disabled. The Voice Chat signal is a categorical signal that measures the ratio of players with the same voice chat setting as the joining player to the number of players in the server.\\n\\nIf a place has voice chat disabled, the Voice Chat signal's weight is 0.\\n\\n$\\\\text{voiceChatSignalScore} = \\\\text{\\\\# players with same voice chat setting as joining player} / \\\\text{\\\\# players on the server}$\\n\\nText Chat\\n\\nA categorical signal that measures the ratio of players on the server who can text chat with the joining player together in common.\\n\\n$\\\\text{textChatSignalScore} = \\\\text{\\\\# players can text with the joining player in common } / \\\\text{\\\\# players on the server}$\\n\\nCustom attributes\\n\\nCustom attributes give custom signals access to player and server data. For more information about creating your own custom attributes, see Create a custom attribute. For more information about existing Roblox attributes, see Existing attributes.\\n\\n\\n    Attribute\\n    Characteristics\\n\\n\\n\\n    Player\\n    Persistent  Custom player data that persists in data stores, like a player's level or score inside the experience  Managed using the Class.DataStore|DataStore APIs\\n\\n\\n    Server\\n    Not persistent and only last as long as the server is active  Server-specific data like the server level or game mode  Managed using the Class.MatchmakingService|MatchmakingService API\\n\\n\\nlua title=\\\"Player attribute example\\\"\\nlocal DataStoreService = game:GetService(\\\"DataStoreService\\\")\\n\\nlocal eloStore = DataStoreService:GetDataStore(\\\"PlayerElo\\\")\\n\\nfunction onMatchEnded(players: {Player}, winners: {Player}, losers: {Player})\\n\\tfor , player in players do\\n\\t\\tlocal updatedElo = CalculateUpdatedElo(player, winners, losers)\\n\\t\\tlocal success, errorMessage = pcall(function()\\n\\t\\t\\teloStore:SetAsync(player.UserId, updatedElo)\\n\\t\\tend)\\n\\tend\\nend\\n\\nlua title=\\\"Server attribute example\\\"\\nlocal MatchmakingService = game:GetService(\\\"MatchmakingService\\\")\\nlocal RunService = game:GetService(\\\"RunService\\\")\\n\\nif RunService:IsStudio() then\\n\\t-- Sets up initial attributes and schema for testing\\n\\tMatchmakingService:InitializeServerAttributesForStudio({\\n\\t\\tLevel = \\\"Advanced\\\",\\n\\t\\tElo = 123.456,\\n\\t\\tTrainingMode = true\\n\\t})\\nend\\n\\n-- Retrieves the Level attribute\\nlocal currentLevel, errorMessage = MatchmakingService:GetServerAttribute(\\\"Level\\\")\\nif errorMessage then\\n\\twarn(errorMessage)\\nelse\\n\\tprint(\\\"Current level: \\\" .. currentLevel)\\nend\\n\\n-- Updates the Level attribute value to Advanced\\nlocal success, errorMessage = MatchmakingService:SetServerAttribute(\\\"Level\\\", \\\"Advanced\\\")\\nif not success then\\n\\twarn(\\\"Failed to update server attribute [Level] to [Advanced] due to error: \\\" .. errorMessage)\\nelse\\n\\tprint(\\\"Successfully set [Level] to [Advanced]\\\")\\nend\\n\\nCustom signals\\n\\nCustom signals are created and defined by you and can be numerical or categorical:\\n\\n- Numerical signals are numbers. They compare the difference between the joining player's attribute and the server's aggregated value, with larger differences lowering or increasing the score. For example, the closer the skill level of a player is to the average skill level of the server, the higher the numerical signal's score is. This score is then multiplied by the signal's weight.\\n- Categorical signals are strings or booleans. They're based on how common the joining player's attribute is when compared to the other players in the server. For example, if a high percentage of the players inside a server have the same preferred language as the joining player, the score increases. This score is then also multiplied by the signal's weight.\\n\\nFor more information about creating your own custom signals, see Create a custom signal. For more information about existing Roblox signals, see Existing signals.\\n\\nPlayer numerical\\n\\nJoining player\\n\\nMinimizes the difference between the server's average player attribute and the joining player's attribute. Differences beyond 1000 return a signal score of 0.\\n\\nlua title=\\\"Joining player formula for player numerical signal\\\"\\nlocal diff = math.abs(server{aggregationfunction}{attributename} - joiningplayer{attributename})\\nlocal score = 1 - math.min(diff / maxrelevantdifference, 1)\\nreturn score\\n\\nlua title=\\\"Joining player example for player numerical signal\\\"\\nlocal serveraverageElo = 2000\\nlocal joiningplayerElo = 1000\\nlocal maxrelevantdifference = 1500\\n\\nlocal diff = math.abs(serveraverageElo - joiningplayerElo)\\nlocal score = 1 - math.min(diff / maxrelevantdifference, 1)\\nreturn score\\n\\nConstant value\\n\\nMinimizes the difference between the server's average player attribute and a constant value of 500. Differences beyond 1000 return a signal score of 0.\\n\\nlua title=\\\"Constant value formula for player numerical signal\\\"\\nlocal diff = math.abs(serversum{attributename} + joiningplayer{attributename} - constantvalue)\\nlocal score = 1 - math.min(diff / maxrelevantdifference, 1)\\nreturn score\\n\\nlua title=\\\"Constant value example for player numerical signal\\\"\\nlocal serversumPowerLevel = 4500\\nlocal joiningplayerPowerLevel = 9901\\nlocal maxrelevantdifference = 1500\\nlocal constantvalue = 5000\\n\\nlocal diff = math.abs(serversumPowerLevel + joiningplayerPowerLevel - constantvalue)\\nlocal score = 1 - math.min(diff / maxrelevantdifference, 1)\\n\\nPlayer categorical\\n\\nClustering\\n\\nMaximizes the ratio of players in the server who have the same attribute as the joining player's attribute.\\n\\nlua title=\\\"Clustering formula for player categorical signal\\\"\\nlocal score = numplayerssame{attributename} / occupancy\\nreturn score\\n\\nlua title=\\\"Clustering example for player categorical signal\\\"\\nlocal numplayerssameGuild = 15\\nlocal occupancy = 19\\n\\nlocal score = numplayerssameGuild / occupancy\\nreturn score\\n\\nDiversifying\\n\\nMaximizes the ratio of players in the server who have a different attribute than the joining player's attribute.\\n\\nlua title=\\\"Diversifying formula for player categorical signal\\\"\\nlocal score = numplayerssame{attributename} / occupancy\\nreturn 1 - score\\n\\nlua title=\\\"Diversifying example for player categorical signal\\\"\\nlocal numplayerssameRpgClass = 15\\nlocal occupancy = 19\\n\\nlocal score = numplayerssameRpgClass / occupancy\\nreturn score\\n\\nServer numerical\\n\\nJoining player\\n\\nMinimizes the difference between the server's attribute and the joining player's attribute. Differences beyond 1000 return a signal score of 0.\\n\\nlua title=\\\"Joining player formula for server numerical signal\\\"\\nlocal diff = math.abs(server{attributename} - joiningplayer{attributename})\\nlocal score = 1 - math.min(diff / maxrelevantdifference, 1)\\nreturn score\\n\\nlua title=\\\"Joining player example for player numerical signal\\\"\\nlocal serverLevel = 4500\\nlocal joiningplayerLevel = 9000\\nlocal maxrelevantdifference = 1500\\n\\nlocal diff = math.abs(serverLevel - joiningplayerLevel)\\nlocal score = 1 - math.min(diff / maxrelevantdifference, 1)\\n\\nConstant value\\n\\nMinimizes the difference between the server's attribute value and a constant value. Differences beyond this constant value return a signal score of 0.\\n\\nlua title=\\\"Constant value formula for server numerical signal\\\"\\nlocal diff = math.abs(server{attributename} - constantvalue)\\nlocal score = math.min(diff / maxrelevantdifference, 1)\\nreturn score\\n\\nlua title=\\\"Constant value example for server numerical signal\\\"\\nlocal serverGameTime = 500\\nlocal maxrelevantdifference = 1000\\nlocal constantvalue = 1000\\n\\nlocal diff = math.abs(serverGameTime - constantvalue)\\nlocal score = math.min(diff / maxrelevantdifference, 1)\\n\\nServer categorical\\n\\nCompare to joining player\\n\\nThe score is 1 when the server's attribute value (for example, Game Mode) is equal to the player's attribute value (for example, Preferred Game Mode). Otherwise, the signal score is 0.\\n\\nlua title=\\\"Joining player formula for server categorical signal\\\"\\nif server{attributename} == joiningplayer{attributename} then\\n\\treturn 1\\nelse\\n\\treturn 0\\nend\\n\\nlua title=\\\"Joining player example for server categorical signal\\\"\\nlocal serverGameMode = \\\"Survival\\\"\\nlocal joiningplayerGameMode = \\\"Survival\\\"\\n\\nif serverGameMode == joiningplayerGameMode then\\n\\treturn 1\\nelse\\n\\treturn 0\\nend\\n\\nCompare to constant value\\n\\nThe score is 1 when the server's attribute value is equal to a constant value of true. Otherwise, the signal score is 0.\\n\\nlua title=\\\"Constant value formula for server categorical signal\\\"\\nif server{attributename} == constantvalue then\\n\\treturn 1\\nelse\\n\\treturn 0\\nend\\n\\nlua title=\\\"Constant value example for server categorical signal\\\"\\nlocal serverGameNotStarted = true\\n\\nif serverGameNotStarted == true then\\n\\treturn 1\\nelse\\n\\treturn 0\\nend\",\n    \"source\": \"attributes-and-signals.md\"\n}",
    "source": "attributes-and-signals.json"
}