{
    "metadata": {},
    "content": "{\n    \"source_filename\": \"avatar-context-menu.md\",\n    \"metadata\": {\n        \"title\": \"Avatar Context Menu\",\n        \"description\": \"The Avatar Context Menu (ACM) allows users to interact and customize actions with others in their experience.\"\n    },\n    \"content\": \"The **Avatar Context Menu** (ACM) makes it easier for users to interact with each other. When the ACM is enabled in your experience, a user can walk up to another user's character and click on them to open a small menu with several default options. The player can send a connection request, begin a private chat, view the user's profile, or wave.\\n\\nAfter [enabling](#enable-the-avatar-context-menu) the ACM in your experience, you can customize the ACM in the following ways:\\n\\n- Programmatically [open and close](#open-and-close-the-acm) the ACM for specific users.\\n- [Add](#add-menu-options) custom options and [remove](#remove-menu-options) existing options to the ACM.\\n- [Customize the ACM appearance](#customize-menu-appearance) to create a unique user interface.\\n\\n## Enable the Avatar Context Menu\\n\\nThe Avatar Context Menu must be enabled using the `Class.StarterGui:SetCore()` option \\\"AvatarContextMenuEnabled\\\" in a `Class.LocalScript`. The ACM is best used in experiences where there is no predefined behavior for clicking on other users.\\n\\nUse the following code sample to enable the ACM in a `Class.LocalScript`:\\n\\n```lua\\n-- Run in a LocalScript, ideally within \\\"StarterPlayerScripts\\\"\\nlocal StarterGui = game:GetService(\\\"StarterGui\\\")\\nStarterGui:SetCore(\\\"AvatarContextMenuEnabled\\\", true)\\n```\\n\\nIf you need to detect whether the ACM is enabled, you can use the following code to return a boolean on the current status of the ACM:\\n\\n```lua\\n---Returns a boolean indicating if the ACM is currently enabled.\\nStarterGui:GetCore(AvatarContextMenuEnabled)\\n```\\n\\n## Open and close the ACM\\n\\nOnce enabled, you can open and close the ACM programmatically with `Class.StarterGui`.\\n\\nTo programmatically open the ACM, use the following code:\\n\\n```lua\\n-- Use StarterGui:SetCore where targetPlayer is a valid Player object\\nStarterGui:SetCore(\\\"AvatarContextMenuTarget\\\", targetPlayer)\\n```\\n\\nTo programmatically close the ACM, use the following code:\\n\\n```lua\\nStarterGui:SetCore(\\\"AvatarContextMenuTarget\\\", nil)\\n```\\n\\n## Menu options\\n\\nYou can [add](#add-menu-options) and [remove](#remove-menu-options) actions through scripting. By default, the menu has the following options:\\n\\n<table>\\n<thead>\\n  <tr>\\n    <th>Menu option</th>\\n    <th>Description</th>\\n  </tr>\\n</thead>\\n<tbody>\\n  <tr>\\n    <td>Connection</td>\\n    <td>Sends a connection request to the selected user.</td>\\n  </tr>\\n  <tr>\\n    <td>Chat</td>\\n    <td>Opens a private conversation with the selected user in the in-experience chat.</td>\\n  </tr>\\n  <tr>\\n    <td>View</td>\\n    <td>Opens a window to inspect the selected user's appearance.</td>\\n  </tr>\\n  <tr>\\n    <td>Wave</td>\\n    <td>Initiates a wave animation to the selected user. </td>\\n  </tr>\\n</tbody>\\n</table>\\n\\nOnce the ACM is open, the user can scroll and select other users on the character selection carousel. Characters are sorted based on distance to the selected character. The menu only updates when opened and the list of available users will repeat when scrolling.\\n\\n<img src=\\\"../assets/avatar/context-menu/ACM-User-Selector.png\\\" width=\\\"345\\\" />\\n\\n### Add menu options\\n\\nOnce enabled, experience-specific actions can be added to the ACM. For example, an experience might allow for trade requests, add-to-party options, or other special interactions.\\n\\nThe following example shows how to add a custom action to the Avatar Context Menu:\\n\\n```lua\\nlocal Players = game:GetService(\\\"Players\\\")\\nlocal StarterGui = game:GetService(\\\"StarterGui\\\")\\nlocal player = Players.LocalPlayer\\n\\n-- Connect a function to a \\\"BindableEvent\\\"\\nlocal bindableEvent = Instance.new(\\\"BindableEvent\\\")\\nlocal function onCustomACMAction(targetPlayer)\\n\\t-- At this point, you could call InvokeServer() on a RemoteFunction to alert the server of the selection\\n\\tprint(\\\"ACM event selected by \\\" .. player.Name .. \\\" on \\\" .. targetPlayer.Name)\\nend\\nbindableEvent.Event:Connect(onCustomACMAction)\\n\\n-- Add the ACM option using SetCore() with \\\"AddAvatarContextMenuOption\\\"\\nlocal options = {\\\"Custom ACM Action\\\", bindableEvent}\\nStarterGui:SetCore(\\\"AddAvatarContextMenuOption\\\", options)\\n```\\n\\n### Remove menu options\\n\\nYou can remove custom and the default Add Friend, Chat, View, and Wave options from the ACM by referencing the custom Action name or the default `Enum.AvatarContextMenuOption` enum.\\n\\nUse the following code to remove a default and custom menu option:\\n\\n```lua\\n-- Remove the \\\"Custom ACM Action\\\" option\\nStarterGui:SetCore(\\\"RemoveAvatarContextMenuOption\\\", \\\"Custom ACM Action\\\")\\n\\n-- Remove the default \\\"Friend\\\" option by referencing the AvatarContextMenuOption.Friend Enum\\nStarterGui:SetCore(\\\"RemoveAvatarContextMenuOption\\\", Enum.AvatarContextMenuOption.Friend)\\n```\\n\\n<Alert severity ='warning'>\\nYou can not make edits to the ACM while it is open. Your code should verify that an action is still relevant in case the action was removed from the menu. For example, if a marketplace area adds an option to send trade requests, you should verify both users are still in the marketplace.\\n</Alert>\\n\\n## Customize menu appearance\\n\\nTo change the appearance of the Avatar Context Menu, call `Class.StarterGui:SetCore()` with the option \\\"AvatarContextMenuTheme\\\", providing a table of parameters and values to adjust the menu appearance.\\n\\nThe ACM user interface includes the following sections:\\n\\n<img src=\\\"../assets/avatar/context-menu/ACM-Sections-Labeled.png\\\" width=\\\"404\\\" />\\n\\nA. Name Tag: The user name of the character being interacted with.\\n\\nB. Button Frame: Contains all of the ACM buttons.\\n\\nC. Buttons: Individual buttons for the default or custom ACM actions.\\n\\n### Appearance parameters\\n\\nThese are the customization parameters with the ACM:\\n\\n#### Background\\n\\n<table>\\n<tbody>\\n  <tr>\\n    <td>BackgroundColor</td>\\n    <td>A `Datatype.Color3` for the overall background of the ACM (most useful when not using a background image).</td>\\n  </tr>\\n  <tr>\\n    <td>BackgroundTransparency</td>\\n    <td>Transparency value (0–1) for the overall background of the ACM (most useful when not using a background image).</td>\\n  </tr>\\n  <tr>\\n    <td>BackgroundImage</td>\\n    <td>A valid asset ID of an image for the ACM background.</td>\\n  </tr>\\n  <tr>\\n    <td>BackgroundImageTransparency</td>\\n    <td>Transparency value (0–1) for the background image.</td>\\n  </tr>\\n  <tr>\\n    <td>BackgroundImageScaleType</td>\\n    <td>A `Enum.ScaleType` enum for background image scaling.</td>\\n  </tr>\\n  <tr>\\n    <td>BackgroundImageSliceCenter</td>\\n    <td>A `Datatype.Rect` specifying the center of a nine-slice image when BackgroundImageScaleType is set to `Enum.ScaleType.Slice`.</td>\\n  </tr>\\n</tbody>\\n</table>\\n\\n#### Name tag\\n\\n<table>\\n<tbody>\\n  <tr>\\n    <td>NameTagColor</td>\\n    <td>A `Datatype.Color3` for the bar showing which player is being interacted with.</td>\\n  </tr>\\n  <tr>\\n    <td>NameUnderlineColor</td>\\n    <td>A `Datatype.Color3` for the thin line between the name tag and action buttons.</td>\\n  </tr>\\n</tbody>\\n</table>\\n\\n#### Button frame\\n\\n<table>\\n<tbody>\\n  <tr>\\n    <td>ButtonFrameColor</td>\\n    <td>A `Datatype.Color3` for the section (frame) containing the action buttons.</td>\\n  </tr>\\n  <tr>\\n    <td>ButtonFrameTransparency\\t</td>\\n    <td>Transparency value (0–1) for the button frame section.</td>\\n  </tr>\\n</tbody>\\n</table>\\n\\n#### Button\\n\\n<table>\\n<tbody>\\n  <tr>\\n    <td>ButtonColor</td>\\n    <td>A `Datatype.Color3` for the background of the ACM action buttons.</td>\\n  </tr>\\n  <tr>\\n    <td>ButtonTransparency</td>\\n    <td>Transparency value (0–1) for the background color of the action buttons.</td>\\n  </tr>\\n  <tr>\\n    <td>ButtonHoverColor</td>\\n    <td>A `Datatype.Color3` for the \\\"hover\\\" state of the action buttons.</td>\\n  </tr>\\n  <tr>\\n    <td>ButtonHoverTransparency</td>\\n    <td>Transparency value (0–1) for the \\\"hover\\\" color of the action buttons.</td>\\n  </tr>\\n  <tr>\\n    <td>ButtonUnderlineColor</td>\\n    <td>A `Datatype.Color3` for the thin line which separates each action button.</td>\\n  </tr>\\n  <tr>\\n    <td>ButtonImage</td>\\n    <td>A valid asset ID of an image for the background of buttons.</td>\\n  </tr>\\n  <tr>\\n    <td>ButtonImageScaleType</td>\\n    <td>A `Enum.ScaleType` enum for button image scaling.</td>\\n  </tr>\\n  <tr>\\n    <td>ButtonImageSliceCenter</td>\\n    <td>A `Datatype.Rect` specifying the center of a nine-slice image when ButtonImageScaleType is set to `Enum.ScaleType.Slice`.</td>\\n  </tr>\\n</tbody>\\n</table>\\n\\n#### Text\\n\\n<table>\\n<tbody>\\n  <tr>\\n    <td>Font</td>\\n    <td>A `Enum.Font` enum value for the name tag and button text.</td>\\n  </tr>\\n  <tr>\\n    <td>TextColor</td>\\n    <td>A `Datatype.Color3` for all text within the ACM.</td>\\n  </tr>\\n  <tr>\\n    <td>TextScale</td>\\n    <td>A float value to scale the default text sizes of each element.</td>\\n  </tr>\\n</tbody>\\n</table>\\n\\n#### Various image\\n\\n<table>\\n<tbody>\\n   <tr>\\n    <td>LeaveMenuImage</td>\\n    <td>An asset ID of an image for the ACM close button.</td>\\n  </tr>\\n  <tr>\\n    <td>ScrollLeftImage</td>\\n    <td>An asset ID of an image for the carousel \\\"scroll left\\\" button.</td>\\n  </tr>\\n  <tr>\\n    <td>ScrollRightImage</td>\\n    <td>A valid asset ID of an image for the carousel \\\"scroll right\\\" button.</td>\\n  </tr>\\n</tbody>\\n</table>\\n\\n#### Selected character\\n\\n<table>\\n<tbody>\\n  <tr>\\n    <td>SelectedCharacterIndicator</td>\\n    <td>The `Class.MeshPart` which floats above a character's head to indicate they are selected.</td>\\n  </tr>\\n</tbody>\\n</table>\\n\\n#### Size and position\\n\\n<table>\\n<tbody>\\n  <tr>\\n    <td>Size</td>\\n    <td>A `Datatype.UDim2` for the overall size of the ACM.</td>\\n  </tr>\\n  <tr>\\n    <td>MinSize</td>\\n    <td>A `Datatype.Vector2` specifying the minimum size of the ACM.</td>\\n  </tr>\\n  <tr>\\n    <td>MaxSize</td>\\n    <td>A `Datatype.Vector2` specifying the maximum size of the ACM.</td>\\n  </tr>\\n  <tr>\\n    <td>AspectRatio</td>\\n    <td>A float value specifying the relative width and height of the ACM.</td>\\n  </tr>\\n  <tr>\\n    <td>AnchorPoint</td>\\n    <td>The `Class.GuiObject.AnchorPoint|AnchorPoint` of the ACM.</td>\\n  </tr>\\n  <tr>\\n    <td>OnScreenPosition</td>\\n    <td>A `Datatype.UDim2` specifying the on-screen position of the ACM (the position where it tweens to when opened).</td>\\n  </tr>\\n  <tr>\\n    <td>OffScreenPosition</td>\\n    <td>A `Datatype.UDim2` specifying the off-screen position of the ACM (the position where it tweens from/to when opened/closed).</td>\\n  </tr>\\n</tbody>\\n</table>\\n\\n### Example customization\\n\\nThe following code sample customizes the ACM theme using some basic parameters:\\n\\n```lua\\nlocal StarterGui = game:GetService(\\\"StarterGui\\\")\\n\\nStarterGui:SetCore(\\\"AvatarContextMenuTheme\\\", {\\n\\tBackgroundImage = \\\"\\\",\\n\\tBackgroundTransparency = 0.5,\\n\\tBackgroundColor = Color3.fromRGB(111, 145, 242),\\n\\tNameTagColor = Color3.fromRGB(0, 0, 200),\\n\\tNameUnderlineColor = Color3.fromRGB(213, 233, 255),\\n\\tButtonFrameColor = Color3.fromRGB(15, 24, 65),\\n\\tButtonFrameTransparency = 0.2,\\n\\tButtonUnderlineColor = Color3.fromRGB(213, 233, 255),\\n\\tFont = Enum.Font.SciFi\\n})\\n```\\n\\n<img src=\\\"../assets/avatar/context-menu/Custom-ACM.png\\\" width=\\\"345\\\" />\"\n}"
}