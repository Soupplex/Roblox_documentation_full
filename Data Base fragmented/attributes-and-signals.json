{
    "metadata": {},
    "content": "{\n    \"source_filename\": \"attributes-and-signals.md\",\n    \"metadata\": {\n        \"title\": \"Attributes and signals\",\n        \"description\": \"Attributes and signals define the player and server data used in matchmaking, including both Roblox-provided signals and custom signals you can create.\"\n    },\n    \"content\": \"## Existing attributes\\n\\nThe default Roblox matchmaking configuration uses signals based on existing attributes like player location, age group, and latency.\\n\\nTo use data for matchmaking that Roblox doesn't automatically include in its default configuration, you need to create [custom attributes](#custom-attributes) and [custom signals](#custom-signals).\\n\\n<table>\\n<thead>\\n  <tr>\\n    <th>**Attribute**</th>\\n    <th>**Type**</th>\\n    <th>**Description**</th>\\n  </tr>\\n</thead>\\n<tbody>\\n  <tr>\\n    <td>**Estimated Player Latency**</td>\\n    <td>Numerical</td>\\n    <td>The estimated latency of a player in a server.</td>\\n  </tr>\\n  <tr>\\n    <td>**Has Friends**</td>\\n    <td>Categorical</td>\\n    <td>Whether a server has a connection or another player of the same IP address as the joining player.</td>\\n  </tr>\\n  <tr>\\n    <td>**Is Voice Chat Enabled**</td>\\n    <td>Categorical</td>\\n    <td>Whether a player has voice chat enabled.</td>\\n  </tr>\\n  <tr>\\n    <td>**Player Age**</td>\\n    <td>Numerical</td>\\n    <td>The player’s age.</td>\\n  </tr>\\n  <tr>\\n    <td>**Player Device Type**</td>\\n    <td>Categorical</td>\\n    <td>The player’s device type. Can be a mobile device, a computer, a tablet, a console, or a VR device.</td>\\n  </tr>\\n  <tr>\\n    <td>**Player Language**</td>\\n    <td>Categorical</td>\\n    <td>The player’s language.</td>\\n  </tr>\\n  <tr>\\n    <td>**Player Play History**</td>\\n    <td>Numerical</td>\\n    <td>The log-10 number of minutes a player has played in a universe in the past 28 days.</td>\\n  </tr>\\n  <tr>\\n    <td>**Server Occupancy**</td>\\n    <td>Numerical</td>\\n    <td>The number of players in a server.</td>\\n  </tr>\\n  <tr>\\n    <td>**Player Text Chat Group**</td>\\n    <td>Categorical</td>\\n    <td>The player's text chat group where they can text chat together.</td>\\n  </tr>\\n</tbody>\\n</table>\\n\\n## Existing signals\\n\\nThe following are Roblox-defined signals derived based on Roblox attributes:\\n\\n<table>\\n<thead>\\n  <tr>\\n    <th>**Signal**</th>\\n    <th>**Description**</th>\\n  </tr>\\n</thead>\\n<tbody>\\n  <tr>\\n    <td>[**Age**](#age)</td>\\n    <td>The difference between the average age of players in the server and the joining player’s age, with a maximum relevant difference of 25.</td>\\n  </tr>\\n  <tr>\\n    <td>[**Device Type**](#device-type)</td>\\n    <td>The ratio of players in the server with the same device type as the joining player.</td>\\n  </tr>\\n  <tr>\\n    <td>[**Friends**](#friends)</td>\\n    <td>The number of people in the server who are connections with the joining player or who share an IP address with the joining player. 1 if there is a preferred player, 0 otherwise.</td>\\n  </tr>\\n  <tr>\\n    <td>[**Latency**](#latency)</td>\\n    <td>The estimated player latency for a server, with a max relevant value of 250.</td>\\n  </tr>\\n  <tr>\\n    <td>[**Language**](#language)</td>\\n    <td>The ratio of players in the server with the same language as the joining player</td>\\n  </tr>\\n  <tr>\\n    <td>[**Occupancy**](#occupancy)</td>\\n    <td>The ratio of players in the server compared to the capacity of the server.</td>\\n  </tr>\\n  <tr>\\n    <td>[**Play History**](#play-history)</td>\\n    <td>The difference between the average play history in the server and the joining player’s play history, with a maximum relevant difference of 4.6.</td>\\n  </tr>\\n  <tr>\\n    <td>[**Voice Chat**](#voice-chat)</td>\\n    <td>The ratio of players in the server with voice chat enabled.</td>\\n  </tr>\\n  <tr>\\n    <td>[**Text Chat**](#text-chat)</td>\\n    <td>The ratio of players in the server who can text chat with the joining player together.</td>\\n  </tr>\\n</tbody>\\n</table>\\n\\n### Age\\n\\nA numerical signal that compares the average ages of players on a server to the joining player's age. This signal has a max relevant difference of 25. The signal score is inversely related to the age difference, meaning lower age differences have higher scores.\\n\\n$\\\\text{ageDifferenceSignalScore} = 1 - \\\\min(25, \\\\text{ageDifference}) / 25$\\n\\nwhere\\n\\n$\\\\text{ageDifference} = |\\\\text{avgServerAge} - \\\\text{joiningPlayerAge}|$\\n\\n### Device Type\\n\\nA categorical signal that measures the ratio of players on the server with the same device type as the joining player. Device types include: Computer, mobile device, tablet, console, and VR device.\\n\\n$\\\\text{deviceTypeSignalScore} = \\\\text{\\\\# players with same device as joining player} / \\\\text{\\\\# players on the server}$\\n\\n### Friends\\n\\nA preferred player is a player who is either connections with the joining player or who shares the same IP address as the joining player. The Friends signal is a categorical signal with a score of 1 when there is a preferred player in the server and a score of 0 when there are no preferred players on the server.\\n\\n$\\\\text{friendsSignalScore} = \\\\text{hasFriends} \\\\ {?} \\\\ 1 : 0$\\n\\nThe Friends signal can also be considered a numerical signal with a maximum relevant value of 1.\\n\\n$\\\\text{friendsSignalScore} = \\\\min(\\\\text{\\\\# preferred players in server}, 1) / 1$\\n\\n### Language\\n\\nA categorical signal that measures the ratio of players on the server who share the same language setting as the joining player.\\n\\n$\\\\text{languageSignalScore} = \\\\text{\\\\# players with same language setting as joining player} / \\\\text{\\\\# players on the server}$\\n\\n### Latency\\n\\nA numerical signal that measures the estimated ping time in milliseconds of the joining player if they were to play on a server. This signal has a max relevant value of 250 milliseconds. The signal score is inversely related to the ping, meaning lower ping values have higher scores.\\n\\n$\\\\text{latencySignalScore} = 1 - \\\\min(250, \\\\text{estimatedPingMs}) / 250$\\n\\n### Occupancy\\n\\nA numerical signal that measures the ratio of players on the server to the capacity of the server.\\n\\n$\\\\text{occupancySignalScore} = \\\\text{\\\\# players in server} / \\\\text{serverCapacity}$\\n\\n### Play History\\n\\nThe Play History attribute value is the log-10 number of minutes a player has played in a universe in the past 28 days. This numerical signal compares the average log-10 Play History value of players in the server to the joining player's Play History value. This signal has a max relevant difference of 4.6. The signal score is inversely related to the play history difference, meaning lower play history differences have higher scores.\\n\\n$\\\\text{playHistorySignalScore} = 1 - \\\\min(4.6, \\\\text{playHistoryDifference} / 4.6)$, where\\n\\n$\\\\text{playHistoryDifference} = |\\\\text{avgServerPlayHistory} - \\\\text{joiningPlayerPlayHistory}|$\\n\\n### Voice Chat\\n\\nA player can have voice chat enabled or disabled. The Voice Chat signal is a categorical signal that measures the ratio of players with the same voice chat setting as the joining player to the number of players in the server.\\n\\nIf a place has voice chat disabled, the Voice Chat signal's weight is 0.\\n\\n$\\\\text{voiceChatSignalScore} = \\\\text{\\\\# players with same voice chat setting as joining player} / \\\\text{\\\\# players on the server}$\\n\\n### Text Chat\\n\\nA categorical signal that measures the ratio of players on the server who can text chat with the joining player together in common.\\n\\n$\\\\text{textChatSignalScore} = \\\\text{\\\\# players can text with the joining player in common } / \\\\text{\\\\# players on the server}$\\n\\n## Custom attributes\\n\\nCustom attributes give custom signals access to player and server data. For more information about creating your own custom attributes, see [Create a custom attribute](./customize-matchmaking.md#create-a-custom-attribute). For more information about existing Roblox attributes, see [Existing attributes](#existing-attributes).\\n\\n<table>\\n<thead>\\n  <tr>\\n    <th>**Attribute**</th>\\n    <th>**Characteristics**</th>\\n  </tr>\\n</thead>\\n<tbody>\\n  <tr>\\n    <td>**Player**</td>\\n    <td>Persistent <br /><br /> Custom player data that persists in data stores, like a player's level or score inside the experience <br /><br /> Managed using the `Class.DataStore|DataStore` APIs</td>\\n  </tr>\\n  <tr>\\n    <td>**Server**</td>\\n    <td>Not persistent and only last as long as the server is active <br /><br /> Server-specific data like the server level or game mode <br /><br /> Managed using the `Class.MatchmakingService|MatchmakingService` API</td>\\n  </tr>\\n</tbody>\\n</table>\\n\\n```lua title=\\\"Player attribute example\\\"\\nlocal DataStoreService = game:GetService(\\\"DataStoreService\\\")\\n\\nlocal eloStore = DataStoreService:GetDataStore(\\\"PlayerElo\\\")\\n\\nfunction onMatchEnded(players: {Player}, winners: {Player}, losers: {Player})\\n\\tfor _, player in players do\\n\\t\\tlocal updatedElo = CalculateUpdatedElo(player, winners, losers)\\n\\t\\tlocal success, errorMessage = pcall(function()\\n\\t\\t\\teloStore:SetAsync(player.UserId, updatedElo)\\n\\t\\tend)\\n\\tend\\nend\\n```\\n\\n```lua title=\\\"Server attribute example\\\"\\nlocal MatchmakingService = game:GetService(\\\"MatchmakingService\\\")\\nlocal RunService = game:GetService(\\\"RunService\\\")\\n\\nif RunService:IsStudio() then\\n\\t-- Sets up initial attributes and schema for testing\\n\\tMatchmakingService:InitializeServerAttributesForStudio({\\n\\t\\tLevel = \\\"Advanced\\\",\\n\\t\\tElo = 123.456,\\n\\t\\tTrainingMode = true\\n\\t})\\nend\\n\\n-- Retrieves the Level attribute\\nlocal currentLevel, errorMessage = MatchmakingService:GetServerAttribute(\\\"Level\\\")\\nif errorMessage then\\n\\twarn(errorMessage)\\nelse\\n\\tprint(\\\"Current level: \\\" .. currentLevel)\\nend\\n\\n-- Updates the Level attribute value to Advanced\\nlocal success, errorMessage = MatchmakingService:SetServerAttribute(\\\"Level\\\", \\\"Advanced\\\")\\nif not success then\\n\\twarn(\\\"Failed to update server attribute [Level] to [Advanced] due to error: \\\" .. errorMessage)\\nelse\\n\\tprint(\\\"Successfully set [Level] to [Advanced]\\\")\\nend\\n```\\n\\n## Custom signals\\n\\nCustom signals are created and defined by you and can be numerical or categorical:\\n\\n- Numerical signals are numbers. They compare the difference between the joining player's attribute and the server's aggregated value, with larger differences lowering or increasing the score. For example, the closer the skill level of a player is to the average skill level of the server, the higher the numerical signal's score is. This score is then multiplied by the signal's weight.\\n- Categorical signals are strings or booleans. They're based on how common the joining player's attribute is when compared to the other players in the server. For example, if a high percentage of the players inside a server have the same preferred language as the joining player, the score increases. This score is then also multiplied by the signal's weight.\\n\\nFor more information about creating your own custom signals, see [Create a custom signal](./customize-matchmaking.md#create-a-custom-signal). For more information about existing Roblox signals, see [Existing signals](#existing-signals).\\n\\n### Player numerical\\n\\n<h5>Joining player</h5>\\n\\nMinimizes the difference between the server's average player attribute and the joining player's attribute. Differences beyond 1000 return a signal score of 0.\\n\\n```lua title=\\\"Joining player formula for player numerical signal\\\"\\nlocal diff = math.abs(server_{aggregation_function}_{attribute_name} - joining_player_{attribute_name})\\nlocal score = 1 - math.min(diff / max_relevant_difference, 1)\\nreturn score\\n```\\n\\n```lua title=\\\"Joining player example for player numerical signal\\\"\\nlocal server_average_Elo = 2000\\nlocal joining_player_Elo = 1000\\nlocal max_relevant_difference = 1500\\n\\nlocal diff = math.abs(server_average_Elo - joining_player_Elo)\\nlocal score = 1 - math.min(diff / max_relevant_difference, 1)\\nreturn score\\n```\\n\\n<h5>Constant value</h5>\\n\\nMinimizes the difference between the server's average player attribute and a constant value of 500. Differences beyond 1000 return a signal score of 0.\\n\\n```lua title=\\\"Constant value formula for player numerical signal\\\"\\nlocal diff = math.abs(server_sum_{attribute_name} + joining_player_{attribute_name} - constant_value)\\nlocal score = 1 - math.min(diff / max_relevant_difference, 1)\\nreturn score\\n```\\n\\n```lua title=\\\"Constant value example for player numerical signal\\\"\\nlocal server_sum_PowerLevel = 4500\\nlocal joining_player_PowerLevel = 9901\\nlocal max_relevant_difference = 1500\\nlocal constant_value = 5000\\n\\nlocal diff = math.abs(server_sum_PowerLevel + joining_player_PowerLevel - constant_value)\\nlocal score = 1 - math.min(diff / max_relevant_difference, 1)\\n```\\n\\n### Player categorical\\n\\n<h5>Clustering</h5>\\n\\nMaximizes the ratio of players in the server who have the same attribute as the joining player's attribute.\\n\\n```lua title=\\\"Clustering formula for player categorical signal\\\"\\nlocal score = num_players_same_{attribute_name} / occupancy\\nreturn score\\n```\\n\\n```lua title=\\\"Clustering example for player categorical signal\\\"\\nlocal num_players_same_Guild = 15\\nlocal occupancy = 19\\n\\nlocal score = num_players_same_Guild / occupancy\\nreturn score\\n```\\n\\n<h5>Diversifying</h5>\\n\\nMaximizes the ratio of players in the server who have a different attribute than the joining player's attribute.\\n\\n```lua title=\\\"Diversifying formula for player categorical signal\\\"\\nlocal score = num_players_same_{attribute_name} / occupancy\\nreturn 1 - score\\n```\\n\\n```lua title=\\\"Diversifying example for player categorical signal\\\"\\nlocal num_players_same_RpgClass = 15\\nlocal occupancy = 19\\n\\nlocal score = num_players_same_RpgClass / occupancy\\nreturn score\\n```\\n\\n### Server numerical\\n\\n<h5>Joining player</h5>\\n\\nMinimizes the difference between the server's attribute and the joining player's attribute. Differences beyond 1000 return a signal score of 0.\\n\\n```lua title=\\\"Joining player formula for server numerical signal\\\"\\nlocal diff = math.abs(server_{attribute_name} - joining_player_{attribute_name})\\nlocal score = 1 - math.min(diff / max_relevant_difference, 1)\\nreturn score\\n```\\n\\n```lua title=\\\"Joining player example for player numerical signal\\\"\\nlocal server_Level = 4500\\nlocal joining_player_Level = 9000\\nlocal max_relevant_difference = 1500\\n\\nlocal diff = math.abs(server_Level - joining_player_Level)\\nlocal score = 1 - math.min(diff / max_relevant_difference, 1)\\n```\\n\\n<h5>Constant value</h5>\\n\\nMinimizes the difference between the server's attribute value and a constant value. Differences beyond this constant value return a signal score of 0.\\n\\n```lua title=\\\"Constant value formula for server numerical signal\\\"\\nlocal diff = math.abs(server_{attribute_name} - constant_value)\\nlocal score = math.min(diff / max_relevant_difference, 1)\\nreturn score\\n```\\n\\n```lua title=\\\"Constant value example for server numerical signal\\\"\\nlocal server_GameTime = 500\\nlocal max_relevant_difference = 1000\\nlocal constant_value = 1000\\n\\nlocal diff = math.abs(server_GameTime - constant_value)\\nlocal score = math.min(diff / max_relevant_difference, 1)\\n```\\n\\n### Server categorical\\n\\n<h5>Compare to joining player</h5>\\n\\nThe score is 1 when the server's attribute value (for example, Game Mode) is equal to the player's attribute value (for example, Preferred Game Mode). Otherwise, the signal score is 0.\\n\\n```lua title=\\\"Joining player formula for server categorical signal\\\"\\nif server_{attribute_name} == joining_player_{attribute_name} then\\n\\treturn 1\\nelse\\n\\treturn 0\\nend\\n```\\n\\n```lua title=\\\"Joining player example for server categorical signal\\\"\\nlocal server_GameMode = \\\"Survival\\\"\\nlocal joining_player_GameMode = \\\"Survival\\\"\\n\\nif server_GameMode == joining_player_GameMode then\\n\\treturn 1\\nelse\\n\\treturn 0\\nend\\n```\\n\\n<h5>Compare to constant value</h5>\\n\\nThe score is 1 when the server's attribute value is equal to a constant value of true. Otherwise, the signal score is 0.\\n\\n```lua title=\\\"Constant value formula for server categorical signal\\\"\\nif server_{attribute_name} == constant_value then\\n\\treturn 1\\nelse\\n\\treturn 0\\nend\\n```\\n\\n```lua title=\\\"Constant value example for server categorical signal\\\"\\nlocal server_GameNotStarted = true\\n\\nif server_GameNotStarted == true then\\n\\treturn 1\\nelse\\n\\treturn 0\\nend\\n```\"\n}"
}